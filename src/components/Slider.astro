---
const data = Astro.props.data;
---

<div
  class="w-full overflow-hidden flex flex-nowrap text-center py-5 mb-20 mt-40"
  id="slider"
>
  <div class="flex-none w-full flex flex-row items-center justify-center">
    <a href="/" class="w-2/3">
      <img src={data[0].image} alt="Mejor cafetería de la zona"/>
    </a>
    <div
      class="flex flex-col justify-center items-center w-1/3 bg-gray-200 h-full gap-3"
    >
      <h2 class="text-4xl font-script">
        {data[0].title}
      </h2>
      <p class="font-thin">{data[0].description}</p>
      <a href="/" class="shadow-lg bg-red-600 text-white p-2 rounded-lg">
        <span>{data[0].buttonText}</span>
      </a>
    </div>
  </div>
  <div class="flex-none w-full flex flex-row items-center justify-center">
    <a href="/" class="w-2/3">
      <img src={data[1].image} alt="Nuestras creaciones más sabrosas"/>
    </a>
    <div
      class="flex flex-col justify-center items-center w-1/3 bg-gray-200 h-full gap-3"
    >
      <h2 class="text-4xl font-script">
        {data[1].title}
      </h2>
      <p class="text-lg font-thin">{data[1].description}</p>
      <a href="/" class="shadow-lg bg-red-600 text-white p-2 rounded-lg">
        <span>{data[1].buttonText}</span>
      </a>
    </div>
  </div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const slider = document.querySelector("#slider");
    if (slider) {
      setTimeout(function moveSlide() {
        const max = slider.scrollWidth - slider.clientWidth;
        const left = slider.clientWidth;

        if (max === slider.scrollLeft) {
          slider.scrollTo({ left: 0, behavior: "smooth" });
        } else {
          slider.scrollBy({ left, behavior: "smooth" });
        }

        setTimeout(moveSlide, 4000);
      }, 4000);
    } else {
      console.error("#data element not found");
    }
  });
</script>
